<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"></head>
<body>
<div class="container">
    <div class="row">
        <div class="col-6">
            <div id="map" style="width:100%;height:400px;"></div>
        </div>
        <div class="col">
            <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="도로명 주소" aria-label="도로명 주소">
                <button class="btn btn-outline-secondary" type="button">추가</button>
            </div>
        </div>
    </div>
    <div th:replace="~{fragments/footer :: footer}"></div>
</div>
<script>
    const map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5666805, 126.9784147),
        zoom: 10,
        zoomControl: true,
        zoomControlOptions: {
            position: naver.maps.Position.TOP_RIGHT
        },
        mapTypeId: naver.maps.MapTypeId.NORMAL
    });

    const infoWindow = new naver.maps.InfoWindow();


    function onSuccessGeolocation(position) {
        const location = new naver.maps.LatLng(position.coords.latitude,
            position.coords.longitude);

        map.setCenter(location); // 얻은 좌표를 지도의 중심으로 설정합니다.
        map.setZoom(10); // 지도의 줌 레벨을 변경합니다.
    }

    $(window).on("load", function() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(onSuccessGeolocation, null);
        } else {
            const center = map.getCenter();
            infoWindow.setContent('<div style="padding:20px;"><h5 style="margin-bottom:5px;color:#f00;">Geolocation 미지원</h5></div>');
            infoWindow.open(map, center);
        }
    });
</script>
</body>
</html>